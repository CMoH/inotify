<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>inotify - Erlang OTP application for Linux file monitoring</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<h1>inotify - Erlang OTP application for Linux file monitoring</h1>
<p><b>Version:</b> 0.4.0</p>


<h3><a name="Introduction">Introduction</a></h3>

<p>Inotify allows to monitor changes to files and directory in the
filesystem.  It uses Linux <code>inotify</code> functions, hence the name.</p>

<p>This is an OTP application. When started files and directories can be
watched by calling <a href="inotify.html#watch-1"><code>inotify:watch/1</code></a>.</p>

<p>All file notifications are published via a gen_event.</p>

<h3><a name="Installation">Installation</a></h3>

<p>If using as a dependency in another rebar project add this snippet to the projects
rebar.config:</p>

<pre>  {deps, [
        ... other dependencies ...
        {inotify, ".*", {git, "https://github.com/sheyll/inotify.git"}}]}</pre>

<p>The application must included in the reltool.config and the applications using
this application must have a corresponding entry in their '*.app' files.</p>

<p>This is an OTP application which must be started before it can be used
by other applications.</p>

<h3><a name="Playing_around">Playing around</a></h3>

If building from git:
<pre> ./rebar compile</pre>
You can play around with it by doing this:
<pre> $ export ERL_LIBS=$(pwd) ; erl

 application:start(inotify).
 Ref = inotify:watch("/tmp").
 inotify:print_events(Ref).</pre>
Now add a file in "/tmp":
<pre> touch /tmp/test_inotify</pre>
You should see some info being printed by inotify.
To stop watching:
<pre> inotify:unwatch(Ref)</pre>

<h3><a name="Real_usage">Real usage</a></h3>

<p>The API is exposed by a single module: <a href="inotify.html"><code>inotify</code></a>.</p>

<p>To be able to associate events each call to <a href="inotify.html#watch-1"><code>inotify:watch/1</code></a>
returns a unique reference that is also contained in each event.</p>

<p>NOTE: Currently each file or directory can only be monitored once. Each
call to <a href="inotify.html#watch-1"><code>inotify:watch/1</code></a> with the same path will overwrite the
previous.</p>

<p>Users can either write a full blown gen_event handler and add it to
<code>inotify_evt</code> via <a href="gen_event.html#add_handler-3"><code>gen_event:add_handler/3</code></a> or they can implement
the <code>inotify</code> behaviour and call <a href="inotify.html#add_handler-3"><code>inotify:add_handler/3</code></a>.</p>

In that case <code>Module:inotify_evt(...)</code> will be called for each
event corresponding to 'Tag'.

<hr>
<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Jan 2 2013, 02:28:29.</i></p>
</body>
</html>
